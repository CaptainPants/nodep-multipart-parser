{
  "version": 3,
  "sources": ["../../../src/headers/parseContentDisposition.ts"],
  "sourcesContent": ["\nimport { HeaderParserState, Parameters, processParametersIfPresent } from './internal';\n\nimport { readToken, consumeOptionalWhitespace, readOptionalToken, readQuoted } from './internal';\n\n// TODO: look at filename* in https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Disposition\nexport interface ContentDisposition {\n    type: string;\n    parameters: Parameters;\n    name: string | undefined;\n    filename: string | undefined;\n    filenameStar: string | undefined;\n}\n\nexport function parseContentDisposition(header: string): ContentDisposition {\n    const state: HeaderParserState = {\n        index: 0,\n        end: header.length,\n        string: header\n    };\n\n    const type: string = readToken(state);\n\n    const parameters = processParametersIfPresent(state);\n\n    const filenameIndex = parameters.findIndex(x => x.name == 'filename');\n    const filenameStarIndex = parameters.findIndex(x => x.name == 'filename*');\n    const nameIndex = parameters.findIndex(x => x.name == 'name');\n\n    return {\n        type: type,\n        parameters: parameters,\n        name: nameIndex >= 0 ? parameters[nameIndex].value.toLowerCase() : undefined,\n        filename: filenameIndex >= 0 ? parameters[filenameIndex].value : undefined,\n        filenameStar: filenameStarIndex >= 0 ? parameters[filenameStarIndex].value : undefined\n    };\n}\n\nexport const __testing = process.env.NODE_ENV == 'test' ? {\n    consumeOptionalWhitespace,\n    readToken,\n    readOptionalToken,\n    readQuoted\n} : void 0;"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA,sBAA0E;AAE1E,uBAAoF;AAW7E,iCAAiC,QAAoC;AACxE,QAAM,QAA2B;AAAA,IAC7B,OAAO;AAAA,IACP,KAAK,OAAO;AAAA,IACZ,QAAQ;AAAA;AAGZ,QAAM,OAAe,gCAAU;AAE/B,QAAM,aAAa,gDAA2B;AAE9C,QAAM,gBAAgB,WAAW,UAAU,OAAK,EAAE,QAAQ;AAC1D,QAAM,oBAAoB,WAAW,UAAU,OAAK,EAAE,QAAQ;AAC9D,QAAM,YAAY,WAAW,UAAU,OAAK,EAAE,QAAQ;AAEtD,SAAO;AAAA,IACH;AAAA,IACA;AAAA,IACA,MAAM,aAAa,IAAI,WAAW,WAAW,MAAM,gBAAgB;AAAA,IACnE,UAAU,iBAAiB,IAAI,WAAW,eAAe,QAAQ;AAAA,IACjE,cAAc,qBAAqB,IAAI,WAAW,mBAAmB,QAAQ;AAAA;AAAA;AAI9E,MAAM,YAAY,QAAQ,IAAI,YAAY,SAAS;AAAA,EACtD;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,IACA;",
  "names": []
}
